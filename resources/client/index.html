<!DOCTYPE html>
<html>

<head>
    <body onload="pageLoad()">
    <title>CodeLearn</title>
    <link rel="stylesheet" type="text/css" href="/client/css/styles.css">
    <script src="/client/js/index.js"></script>
    <script src="/client/js/bootstrap.min.js"></script>
    <script src="/client/js/js.cookie.js"></script>
    <link rel="shortcut icon" href="/client/favicon.ico" type="image/x-icon">



</head>








<script>
    "use strict";

    function pageLoadLocal() {
        console.log("Invoked pageLoad()");

        const todaysDate = new Date().toISOString().slice(0, 10);  //get today's date as yyyy-mm-dd
     //   document.getElementById("dateEaten").setAttribute("value", todaysDate);

        getUserName();
    }


    function logout() {
        console.log("logout - remove cookies and redirect to login page");
        Cookies.remove("sessionToken");
        window.location.href = "index.html";
    }

    function getUserName() {
        console.log("Invoked getUserName()");
        const url = "/user/name";

        fetch(url, {
            method: "GET"
            //credentials: "include"            // doens't look like you even need this....????
        }).then(response => {                       //returns a promise
            return response.text();                 //now return that promise to text
        }).then(response => {
            if (response.startsWith("Error:")) {   //checks if response from server has a key "Error:"
          //      alert(response);
            } else {
                document.getElementById("Welcome").innerHTML = "Welcome " + response;           //otherwise put response on page in firstName div
            }
        });
    }
    pageLoadLocal();
</script>


    <div class="welcome">
        <h1 id="Welcome">Welcome</h1>
    </div>

<header>
    <div style="margin-left: 55%;">
    <nav>

        <ul>
            <li><a href="#">I'm new here</a></li>
            <li><a href="upload.html">Upload</a></li>
            <li><a href="#">Home</a></li>
            <li><a href="#">Courses</a></li>
            <li><a href="#">Learn</a></li>
            <li><a href="#">Profile</a></li>
            <li><a href=javascript:logout()>[x]</a></li>
        </ul>

    </nav>
    </div>
</header>
<main>
    <form class="search-container">
        <input type="text" id="search-bar" placeholder="Search">
         </form>

</main>

<div id="content">
    <div id="testDiv"></div>
    <div id="crud"></div>
</div>


</body>

</html>
